<?xml version="1.0" encoding="UTF-8"?>

<odoo>
    <record id="student_form" model="ir.ui.view">
        <field name="name">student form</field>
        <field name="model">institution.student</field>
        <field name="arch" type="xml">
            <form string="Student creation">
                <header>
                <field name="fee_status" widget="badge"
                       decoration-success="fee_status == 'paid'"
                       decoration-warning="fee_status == 'pending'"/>
                </header>
                <sheet>
                    <group>

                        <group>
                            <field name="admission_no"/>
                            <field name="first_name"/>
                            <field name="last_name"/>
                        </group>
                        <group>
                            <field name="dob"/>
                            <field name="gender"/>
                            <field name="guardian"/>
                            <field name="address"/>
                            <field name="active" invisible="1"/>
                        </group>
                        <group>
                            <field name="course_id"/>
                            <field name="batch_id"/>
                        </group>
                    </group>



                        <group string="Pending Fees" invisible="not pending_fee_ids">
                            <field name="pending_fee_ids">
                                <list editable="bottom" create="0" delete="0">
                                     <field name="create_date" string="Created On" readonly="1"/>
                                     <field name="amount" readonly="1"/>
                                     <field name="due_date" string="due on" readonly="1"/>
                                    <field name="payment_status" string="status" />

                                </list>
                            </field>
                        </group>
                   </sheet>


            </form>
        </field>
    </record>

    <record id="student_admission_sequence" model="ir.sequence">
        <field name="name">student.admission.sequence</field>
        <field name="code">institution.student</field>
        <field name="prefix">ADM-UNI-</field>
        <field name="padding">5</field>
    </record>

    <record id="view_institution_student_tree" model="ir.ui.view">
        <field name="name">institution.student.tree</field>
        <field name="model">institution.student</field>
        <field name="arch" type="xml">
            <list string="Student List">
                <field name="admission_no"/>
                <field name="first_name"/>
                <field name="last_name"/>
                <field name="course_id"/>
                <field name="batch_id"/>
                <field name="gender" optional="show"/>
                </list>
        </field>
    </record>


  <record id="student_search" model="ir.ui.view">
        <field name="name">student.search</field>
        <field name="model">institution.student</field>
        <field name="arch" type="xml">
        <search string="Student Search">

            <field name="course_id"/>

            <filter name="group_course" string="Course" context="{'group_by':'course_id'}"/>

        </search>
    </field>
    </record>


    <record id="action_student_search" model="ir.actions.act_window">
        <field name="name">Student Search</field>
        <field name="res_model">institution.student</field>
        <field name="view_mode">list</field>
        <field name="search_view_id" ref="student_search"/>

    </record>

    <record id="action_student_form" model="ir.actions.act_window">
        <field name="name">Students</field>
        <field name="res_model">institution.student</field>
        <field name="view_mode">list,form</field>
        <field name="view_id" ref="view_institution_student_tree"/>

    </record>



</odoo>
